{{ if and (eq .chezmoi.os "linux") -}}

{{ $packages := list
    "bat"
    "fastfetch"
    "git"
    "github-cli"
    "ripgrep"
    "tldr"
    "tmux"
    "zsh" -}}

{{ if eq .osid "linux-ubuntu" -}}
{{   $packages  = mustAppend $packages "fd-find" -}}
{{ end -}}

{{ if eq .osid "linux-arch" -}}
{{   $packages = mustAppend $packages "fd" -}}
{{ end -}}

{{ $sudo := "sudo " -}}
{{ if eq .chezmoi.username "root" -}}
{{   $sudo = "" -}}
{{ end -}}

#!/bin/bash

set -eufo pipefail

{{ if eq .osid "linux-ubuntu" -}}
{{ $sudo }}apt-get update
{{ $sudo }}apt-get install -y {{ $packages | join " " }}
{{ end -}}

{{ if or (eq .osid "linux-arch") (eq .osid "linux-endeavouros") -}}
{{ $sudo }}pacman -Sy --needed {{ $packages | join " " }}
{{ end -}}

systemctl --user enable --now hyprpolkitagent.service

{{ end -}}
